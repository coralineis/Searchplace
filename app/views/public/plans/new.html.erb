<div class="container">
  <div class="row justify-content-center">
    <h3 class="bg-light">Plan新規投稿</h3>
  </div>

  <div class="row ml-5 mb-2">
    <h5 class="font-weight-bold">1日目</h5>
  </div>

  <%= form_with model: @plan, url: confirm_plans_path, method: :post do |f| %>

    <form>
      <div class="row mb-3">
        <label for="inputName" class="col-sm-2 col-form-label">プラン名</label>
        <div class="col-sm-5">
          <input type="name" class="form-control" id="inputName">
        </div>
      </div>

      <div class="row mb-3">
        <label for="inputTag" class="col-sm-2 col-form-label">タグ</label>
        <div id="form_area" class="form-inline">
          <div class="col-sm-10">
            <input type="tag_list" class="form-control" id="inputTag" placeholder="タグを入力してください">
            <button id="0" onclick="deleteBtn(this)" class="btn btn-outline-danger ml-2">削除</button>
          </div>
          <div class="col">
            <input type="button" value="タグを追加" onclick="addForm()" class="btn btn-primary mt-2">
          </div>
        </div>
      </div>

      <script>
        var i = 1 ;
        function addForm() {
          var input_data = document.createElement('input');
          input_data.type = 'tag_list';
          input_data.id = 'inputTag_' + i;
          input_data.placeholder = 'タグを入力してください';
          var parent = document.getElementById('form_area');
          parent.appendChild(input_data);

          var button_data = document.createElement('button');
          button_data.id = i;
          button_data.onclick = function(){deleteBtn(this);}
          button_data.innerHTML = '削除';
          var input_area = document.getElementById(input_data.id);
          parent.appendChild(button_data);

          i++ ;
        }

        function deleteBtn(target) {
          var target_id = target.id;
          var parent = document.getElementById('form_area');
          var ipt_id = document.getElementById('inputTag_' + target_id);
          var tgt_id = document.getElementById(target_id);
          parent.removeChild(ipt_id);
          parent.removeChild(tgt_id);
        }
      </script>

      <div class="form_area2" id ="inputPlace">
        <div class="row mb-3">
          <label for="input" class="col-sm-2 col-form-label">時間</label>
          <div class="col-sm-3">
            <%= f.time_select :time, :minute_step => 15, id: "imputTime" %>～
          </div>
        </div>
        <div class="row mb-3">
          <label for="inputTag" class="col-sm-2 col-form-label">施設名称</label>
          <div class="col-sm-3">
            <%= f.text_field :place_name %>
          </div>
        </div>
        <div class="row mb-3">
          <label for="inputTag" class="col-sm-2 col-form-label">画像</label>
          <div class="col-sm-3">
            <%= f.attachment_field :image %>
          </div>
        </div>
        <div class="row mb-3">
          <label for="inputTag" class="col-sm-2 col-form-label">感想　おすすめポイント</label>
          <div class="col-sm-3">
            <%= f.text_area :introduction %>
          </div>
        </div>
        <input type="button" value="場所を追加" onclick="addForm()">
      </div>

      <script>
        var i = 1 ;
        function addForm() {
          var input_data = document.createElement('input');
          input_data.type = 'inputPlace';
          input_data.id = 'inputPlace_' + i;
          var parent = document.getElementById('form_area2');
          parent.appendChild(input_data);

          var button_data = document.createElement('button');
          button_data.id = i;
          button_data.onclick = function(){deleteBtn(this);}
          button_data.innerHTML = '削除';
          var input_area = document.getElementById(input_data.id);
          parent.appendChild(button_data);

          i++ ;
        }

        function deleteBtn(target) {
          var target_id = target.id;
          var parent = document.getElementById('form_area2');
          var ipt_id = document.getElementById('inputPlace_' + target_id);
          var tgt_id = document.getElementById(target_id);
          parent.removeChild(ipt_id);
          parent.removeChild(tgt_id);
        }
      </script>
    </form>

          <th><%= f.text_field :tag_list, value: @plan.tag_list.join(',') %></th>
          <th></th>
        </tr>
        <tr>
          <th><%= f.submit "投稿イメージを確認する", class: "btn btn-success" %></th>
        </tr>
      </tbody>
    </table>
  <% end %>
</div>
